<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="demographics">
    <p id="demoinstr">
        Please fill out the following demographics form.
    </p>

    <div id="age">Your age:
        <div id="ages">
            <input type="radio" class="option" id="a1" name="age" value="18-25"> 18-25
            <input type="radio" class="option" id="a2" name="age" value="25-39"> 25-39
            <input type="radio" class="option" id="a3" name="age" value="40-49"> 40-49
            <input type="radio" class="option" id="a4" name="age" value="50-59"> 50-59
            <input type="radio" class="option" id="a5" name="age" value="60+"> 60+
            <input type="radio" class="option" id="a6" name="age" value="Unspecified"> Unspecified
        </div>
    </div>
    <br>
    <div id="sex">Your gender:
        <div id="sexes">
            <input type="radio" class="option" id="s1" name="sex" value="Male"> Male
            <input type="radio" class="option" id="s2" name="sex" value="Female"> Female
            <input type="radio" class="option" id="s3" name="sex" value="Unspecified"> Unspecified
        </div>
    </div>
    <br>
    <div id="degree">Highest degree obtained:
        <div id="degrees">
            <input type="radio" class="option" id="d1" name="degree" value="High School"> High School
            <input type="radio" class="option" id="d2" name="degree" value="Bachelors"> Bachelors
            <input type="radio" class="option" id="d3" name="degree" value="Masters"> Masters
            <input type="radio" class="option" id="d4" name="degree" value="PhD"> PhD
            <input type="radio" class="option" id="d5" name="degree" value="Other"> Other
        </div>
    </div>
    <br>
    <div id="monitor">Your monitor size is closest to:
        <div id="monitors">
            <input type="radio" class="option" id="m1" name="monitor" value="9 or smaller"> 9" or smaller
            <input type="radio" class="option" id="m2" name="monitor" value=11> 11"
            <input type="radio" class="option" id="m3" name="monitor" value=13> 13"
            <input type="radio" class="option" id="m4" name="monitor" value=15> 15"
            <input type="radio" class="option" id="m5" name="monitor" value=17> 17"
            <input type="radio" class="option" id="m6" name="monitor" value=19> 19"
            <input type="radio" class="option" id="m7" name="monitor" value=21> 21"
            <input type="radio" class="option" id="m8" name="monitor" value="23 or larger"> 23" or larger
            <input type="radio" class="option" id="m9" name="monitor" value="dontknow"> I'm not sure
        </div>
    </div>
    <br>
</div>
<script src="/d3/d3.js"></script>
<script>
    var data = {};

    // experimentr.startTimer('demo');

    d3.selectAll('input')
        .filter(function(d) { return this.name === "age" ? this : null; })
        .on('change', function() { data.age = this.value; validate(); });

    d3.selectAll('input')
        .filter(function(d) { return this.name === "sex" ? this : null; })
        .on('change', function() { data.sex = this.value; validate(); });

    d3.selectAll('input')
        .filter(function(d) { return this.name === "degree" ? this : null; })
        .on('change', function() { data.degree = this.value; validate(); });

    d3.selectAll('input')
        .filter(function(d) { return this.name === "monitor" ? this : null; })
        .on('change', function() { data.monitor = this.value; validate(); });

    //validate();

    function validate() {
        if(data.age && data.sex && data.degree && data.monitor) {
            //experimentr.endTimer('demo');
            experimentr.addData(data);
            document.getElementById("next-button").disabled = false;
            //experimentr.release();
        }
    }
</script>
</body>
</html>